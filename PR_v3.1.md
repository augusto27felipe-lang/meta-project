# v3.1  Release notes

Resumo

Esta release consolida a versão 3.1 com as seguintes melhorias principais:

- MockAdapter: agora popula o campo `domain` para cada anúncio (ex.: `keyword.example.com`), permitindo relatórios de domínio e métricas por domínio.
- GUI: aba "Métricas" com indicador de carregamento (spinner) e formatação de números (duas casas decimais). Aba "Anúncios" implementada para listar anúncios via API.
- Etapa4 (FastAPI): novos endpoints `/ads`, `/runs`, `/domains`, `/metrics` com cálculo de percentis (p50, p95) e breakdown por keyword.
- Persistência: `KeywordRun` e `Ad` persistidos via SQLAlchemy; testes de integração atualizados.
- Testes: novos testes de integração e unitários para MockAdapter e endpoints.

Como aplicar

Você pode aplicar os commits preservando autor/mensagem com:

```
# em outro clone limpo
git am < v3.1.patch
```

Ou revisar o diff unificado:

```
git apply --check v3.1.patch
```

Arquivos incluídos (destaques)

- `backend/core/adapters/mock_adapter.py`
- `app/gui.py`
- `backend/etapa4_service/main.py`
- `tests/test_api_integration.py`
- `tests/test_mock_adapter.py`

Notas

- Recomendo validar o patch em um clone de teste antes de aplicar em produção.
- Se preferir, posso converter `v3.1.patch` para um conjunto de arquivos `patches/0001-...patch` via `git format-patch`.

---
Generated by automation to prepare PR body for v3.1
